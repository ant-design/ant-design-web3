"use strict";(self.webpackChunk_ant_design_web3_docs=self.webpackChunk_ant_design_web3_docs||[]).push([[8051],{39343:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_BASE_URL=void 0,e.DEFAULT_BASE_URL="https://safe-client.safe.global"},80747:function(A,e,f){Object.defineProperty(e,"__esModule",{value:!0}),e.deleteEndpoint=e.getEndpoint=e.postEndpoint=void 0;const h=f(33434);function m(E,S,o,l){const s=(0,h.insertParams)(S,o),I=(0,h.stringifyQuery)(l);return`${E}${s}${I}`}function c(E,S,o){const l=m(E,S,o==null?void 0:o.path,o==null?void 0:o.query);return(0,h.fetchData)(l,o==null?void 0:o.body)}e.postEndpoint=c;function O(E,S,o,l){if(l)return(0,h.fetchData)(l);const s=m(E,S,o==null?void 0:o.path,o==null?void 0:o.query);return(0,h.fetchData)(s)}e.getEndpoint=O;function d(E,S,o){const l=m(E,S,o==null?void 0:o.path);return(0,h.deleteData)(l)}e.deleteEndpoint=d},33367:function(A,e,f){var h=this&&this.__createBinding||(Object.create?function(t,a,i,g){g===void 0&&(g=i);var T=Object.getOwnPropertyDescriptor(a,i);(!T||("get"in T?!a.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(t,g,T)}:function(t,a,i,g){g===void 0&&(g=i),t[g]=a[i]}),m=this&&this.__exportStar||function(t,a){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&h(a,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterDevice=e.unregisterSafe=e.registerDevice=e.getDelegates=e.confirmSafeMessage=e.proposeSafeMessage=e.getSafeMessage=e.getSafeMessages=e.getDecodedData=e.getMasterCopies=e.getSafeApps=e.getChainConfig=e.getChainsConfig=e.proposeTransaction=e.getNonces=e.postSafeGasEstimation=e.getTransactionDetails=e.getTransactionQueue=e.getTransactionHistory=e.getCollectiblesPage=e.getCollectibles=e.getOwnedSafes=e.getFiatCurrencies=e.getBalances=e.getMultisigTransactions=e.getModuleTransactions=e.getIncomingTransfers=e.getSafeInfo=e.setBaseUrl=void 0;const c=f(80747),O=f(39343);m(f(92717),e),m(f(75578),e),m(f(57567),e),m(f(64436),e),m(f(3439),e),m(f(71984),e),m(f(1178),e),m(f(56274),e),m(f(17072),e);let d=O.DEFAULT_BASE_URL;const E=t=>{d=t};e.setBaseUrl=E;function S(t,a){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:t,address:a}})}e.getSafeInfo=S;function o(t,a,i,g){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:t,address:a},query:i},g)}e.getIncomingTransfers=o;function l(t,a,i,g){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:t,address:a},query:i},g)}e.getModuleTransactions=l;function s(t,a,i,g){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:t,address:a},query:i},g)}e.getMultisigTransactions=s;function I(t,a,i="usd",g={}){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:t,address:a,currency:i},query:g})}e.getBalances=I;function w(){return(0,c.getEndpoint)(d,"/v1/balances/supported-fiat-codes")}e.getFiatCurrencies=w;function _(t,a){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:t,address:a}})}e.getOwnedSafes=_;function y(t,a,i={}){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:t,address:a},query:i})}e.getCollectibles=y;function P(t,a,i={},g){return(0,c.getEndpoint)(d,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:t,address:a},query:i},g)}e.getCollectiblesPage=P;function D(t,a,i,g){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:t,safe_address:a},query:{trusted:g}},i)}e.getTransactionHistory=D;function C(t,a,i,g){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:t,safe_address:a},query:{trusted:g}},i)}e.getTransactionQueue=C;function v(t,a){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:t,transactionId:a}})}e.getTransactionDetails=v;function p(t,a,i){return(0,c.postEndpoint)(d,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:t,safe_address:a},body:i})}e.postSafeGasEstimation=p;function H(t,a){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:t,safe_address:a}})}e.getNonces=H;function R(t,a,i){return(0,c.postEndpoint)(d,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:t,safe_address:a},body:i})}e.proposeTransaction=R;function b(t){return(0,c.getEndpoint)(d,"/v1/chains",{query:t})}e.getChainsConfig=b;function M(t){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}",{path:{chainId:t}})}e.getChainConfig=M;function L(t,a={}){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safe-apps",{path:{chainId:t},query:a})}e.getSafeApps=L;function V(t){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:t}})}e.getMasterCopies=V;function U(t,a,i){return(0,c.postEndpoint)(d,"/v1/chains/{chainId}/data-decoder",{path:{chainId:t},body:{data:a,to:i}})}e.getDecodedData=U;function G(t,a,i){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:t,safe_address:a},query:{}},i)}e.getSafeMessages=G;function B(t,a){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:t,message_hash:a}})}e.getSafeMessage=B;function k(t,a,i){return(0,c.postEndpoint)(d,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:t,safe_address:a},body:i})}e.proposeSafeMessage=k;function j(t,a,i){return(0,c.postEndpoint)(d,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:t,message_hash:a},body:i})}e.confirmSafeMessage=j;function F(t,a={}){return(0,c.getEndpoint)(d,"/v1/chains/{chainId}/delegates",{path:{chainId:t},query:a})}e.getDelegates=F;function r(t){return(0,c.postEndpoint)(d,"/v1/register/notifications",{body:t})}e.registerDevice=r;function n(t,a,i){return(0,c.deleteEndpoint)(d,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:t,safe_address:a,uuid:i}})}e.unregisterSafe=n;function u(t,a){return(0,c.deleteEndpoint)(d,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:t,uuid:a}})}e.unregisterDevice=u},64436:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.FEATURES=e.GAS_PRICE_TYPE=e.RPC_AUTHENTICATION=void 0;var f;(function(c){c.API_KEY_PATH="API_KEY_PATH",c.NO_AUTHENTICATION="NO_AUTHENTICATION",c.UNKNOWN="UNKNOWN"})(f=e.RPC_AUTHENTICATION||(e.RPC_AUTHENTICATION={}));var h;(function(c){c.ORACLE="ORACLE",c.FIXED="FIXED",c.FIXED_1559="FIXED1559",c.UNKNOWN="UNKNOWN"})(h=e.GAS_PRICE_TYPE||(e.GAS_PRICE_TYPE={}));var m;(function(c){c.ERC721="ERC721",c.SAFE_APPS="SAFE_APPS",c.CONTRACT_INTERACTION="CONTRACT_INTERACTION",c.DOMAIN_LOOKUP="DOMAIN_LOOKUP",c.SPENDING_LIMIT="SPENDING_LIMIT",c.EIP1559="EIP1559",c.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",c.TX_SIMULATION="TX_SIMULATION",c.EIP1271="EIP1271"})(m=e.FEATURES||(e.FEATURES={}))},3439:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0;var f;(function(h){h.ERC20="ERC20",h.ERC721="ERC721",h.NATIVE_TOKEN="NATIVE_TOKEN"})(f=e.TokenType||(e.TokenType={}))},1178:function(A,e){Object.defineProperty(e,"__esModule",{value:!0})},71984:function(A,e){Object.defineProperty(e,"__esModule",{value:!0})},17072:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceType=void 0;var f;(function(h){h.ANDROID="ANDROID",h.IOS="IOS",h.WEB="WEB"})(f=e.DeviceType||(e.DeviceType={}))},75578:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppSocialPlatforms=e.SafeAppFeatures=e.SafeAppAccessPolicyTypes=void 0;var f;(function(c){c.NoRestrictions="NO_RESTRICTIONS",c.DomainAllowlist="DOMAIN_ALLOWLIST"})(f=e.SafeAppAccessPolicyTypes||(e.SafeAppAccessPolicyTypes={}));var h;(function(c){c.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(h=e.SafeAppFeatures||(e.SafeAppFeatures={}));var m;(function(c){c.TWITTER="TWITTER",c.GITHUB="GITHUB",c.DISCORD="DISCORD"})(m=e.SafeAppSocialPlatforms||(e.SafeAppSocialPlatforms={}))},92717:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationVersionState=void 0;var f;(function(h){h.UP_TO_DATE="UP_TO_DATE",h.OUTDATED="OUTDATED",h.UNKNOWN="UNKNOWN"})(f=e.ImplementationVersionState||(e.ImplementationVersionState={}))},56274:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeMessageStatus=e.SafeMessageListItemType=void 0;var f;(function(m){m.DATE_LABEL="DATE_LABEL",m.MESSAGE="MESSAGE"})(f=e.SafeMessageListItemType||(e.SafeMessageListItemType={}));var h;(function(m){m.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",m.CONFIRMED="CONFIRMED"})(h=e.SafeMessageStatus||(e.SafeMessageStatus={}))},57567:function(A,e){Object.defineProperty(e,"__esModule",{value:!0}),e.LabelValue=e.DetailedExecutionInfoType=e.TransactionListItemType=e.ConflictType=e.TransactionInfoType=e.SettingsInfoType=e.TransactionTokenType=e.TransferDirection=e.TransactionStatus=e.Operation=void 0;var f;(function(s){s[s.CALL=0]="CALL",s[s.DELEGATE=1]="DELEGATE"})(f=e.Operation||(e.Operation={}));var h;(function(s){s.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",s.AWAITING_EXECUTION="AWAITING_EXECUTION",s.CANCELLED="CANCELLED",s.FAILED="FAILED",s.SUCCESS="SUCCESS"})(h=e.TransactionStatus||(e.TransactionStatus={}));var m;(function(s){s.INCOMING="INCOMING",s.OUTGOING="OUTGOING",s.UNKNOWN="UNKNOWN"})(m=e.TransferDirection||(e.TransferDirection={}));var c;(function(s){s.ERC20="ERC20",s.ERC721="ERC721",s.NATIVE_COIN="NATIVE_COIN"})(c=e.TransactionTokenType||(e.TransactionTokenType={}));var O;(function(s){s.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",s.ADD_OWNER="ADD_OWNER",s.REMOVE_OWNER="REMOVE_OWNER",s.SWAP_OWNER="SWAP_OWNER",s.CHANGE_THRESHOLD="CHANGE_THRESHOLD",s.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",s.ENABLE_MODULE="ENABLE_MODULE",s.DISABLE_MODULE="DISABLE_MODULE",s.SET_GUARD="SET_GUARD",s.DELETE_GUARD="DELETE_GUARD"})(O=e.SettingsInfoType||(e.SettingsInfoType={}));var d;(function(s){s.TRANSFER="Transfer",s.SETTINGS_CHANGE="SettingsChange",s.CUSTOM="Custom",s.CREATION="Creation"})(d=e.TransactionInfoType||(e.TransactionInfoType={}));var E;(function(s){s.NONE="None",s.HAS_NEXT="HasNext",s.END="End"})(E=e.ConflictType||(e.ConflictType={}));var S;(function(s){s.TRANSACTION="TRANSACTION",s.LABEL="LABEL",s.CONFLICT_HEADER="CONFLICT_HEADER",s.DATE_LABEL="DATE_LABEL"})(S=e.TransactionListItemType||(e.TransactionListItemType={}));var o;(function(s){s.MULTISIG="MULTISIG",s.MODULE="MODULE"})(o=e.DetailedExecutionInfoType||(e.DetailedExecutionInfoType={}));var l;(function(s){s.Queued="Queued",s.Next="Next"})(l=e.LabelValue||(e.LabelValue={}))},33434:function(A,e){var f=this&&this.__awaiter||function(o,l,s,I){function w(_){return _ instanceof s?_:new s(function(y){y(_)})}return new(s||(s=Promise))(function(_,y){function P(v){try{C(I.next(v))}catch(p){y(p)}}function D(v){try{C(I.throw(v))}catch(p){y(p)}}function C(v){v.done?_(v.value):w(v.value).then(P,D)}C((I=I.apply(o,l||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.deleteData=e.fetchData=e.stringifyQuery=e.insertParams=void 0;const h=o=>typeof o=="object"&&o!==null&&"code"in o&&"message"in o;function m(o,l,s){return o.replace(new RegExp(`\\{${l}\\}`,"g"),s)}function c(o,l){return l?Object.keys(l).reduce((s,I)=>m(s,I,String(l[I])),o):o}e.insertParams=c;function O(o){if(!o)return"";const l=new URLSearchParams;Object.keys(o).forEach(I=>{o[I]!=null&&l.append(I,String(o[I]))});const s=l.toString();return s?`?${s}`:""}e.stringifyQuery=O;function d(o){return f(this,void 0,void 0,function*(){let l;try{l=yield o.json()}catch{if(o.headers&&o.headers.get("content-length")!=="0")throw new Error(`Invalid response content: ${o.statusText}`)}if(!o.ok){const s=h(l)?`${l.code}: ${l.message}`:o.statusText;throw new Error(s)}return l})}function E(o,l){return f(this,void 0,void 0,function*(){let s;l!=null&&(s={method:"POST",body:typeof l=="string"?l:JSON.stringify(l),headers:{"Content-Type":"application/json"}});const I=yield fetch(o,s);return d(I)})}e.fetchData=E;function S(o){return f(this,void 0,void 0,function*(){const s=yield fetch(o,{method:"DELETE"});return d(s)})}e.deleteData=S},55972:function(A,e,f){f.d(e,{default:function(){return F}});const h=()=>"9.1.0",m=r=>r.toString(16).padStart(2,"0"),c=r=>{const n=new Uint8Array((r||40)/2);return window.crypto.getRandomValues(n),Array.from(n,m).join("")},O=()=>typeof window<"u"?c(10):new Date().getTime().toString(36);class d{}d.makeRequest=(r,n)=>({id:O(),method:r,params:n,env:{sdkVersion:h()}}),d.makeResponse=(r,n,u)=>({id:r,success:!0,version:u,data:n}),d.makeErrorResponse=(r,n,u)=>({id:r,success:!1,error:n,version:u});var E;(function(r){r.sendTransactions="sendTransactions",r.rpcCall="rpcCall",r.getChainInfo="getChainInfo",r.getSafeInfo="getSafeInfo",r.getTxBySafeTxHash="getTxBySafeTxHash",r.getSafeBalances="getSafeBalances",r.signMessage="signMessage",r.signTypedMessage="signTypedMessage",r.getEnvironmentInfo="getEnvironmentInfo",r.getOffChainSignature="getOffChainSignature",r.requestAddressBook="requestAddressBook",r.wallet_getPermissions="wallet_getPermissions",r.wallet_requestPermissions="wallet_requestPermissions"})(E||(E={}));var S;(function(r){r.requestAddressBook="requestAddressBook"})(S||(S={}));class o{constructor(n=null,u=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:t,data:a,source:i})=>{const g=!a,T=!this.isServer&&i===window.parent,N=typeof a.version<"u"&&parseInt(a.version.split(".")[0]),q=typeof N=="number"&&N>=1;let W=!0;return Array.isArray(this.allowedOrigins)&&(W=this.allowedOrigins.find(K=>K.test(t))!==void 0),!g&&T&&q&&W},this.logIncomingMessage=t=>{console.info(`Safe Apps SDK v1: A message was received from origin ${t.origin}. `,t.data)},this.onParentMessage=t=>{this.isValidMessage(t)&&(this.debugMode&&this.logIncomingMessage(t),this.handleIncomingMessage(t.data))},this.handleIncomingMessage=t=>{const{id:a}=t,i=this.callbacks.get(a);i&&(i(t),this.callbacks.delete(a))},this.send=(t,a)=>{const i=d.makeRequest(t,a);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(i,"*"),new Promise((g,T)=>{this.callbacks.set(i.id,N=>{if(!N.success){T(new Error(N.error));return}g(N)})})},this.allowedOrigins=n,this.debugMode=u,this.isServer||window.addEventListener("message",this.onParentMessage)}}var l=o;const s=r=>typeof r=="object"&&r!=null&&"domain"in r&&"types"in r&&"message"in r;var I=f(33367);class w{constructor(n){this.communicator=n}async getBySafeTxHash(n){if(!n)throw new Error("Invalid safeTxHash");return(await this.communicator.send(E.getTxBySafeTxHash,{safeTxHash:n})).data}async signMessage(n){const u={message:n};return(await this.communicator.send(E.signMessage,u)).data}async signTypedMessage(n){if(!s(n))throw new Error("Invalid typed data");return(await this.communicator.send(E.signTypedMessage,{typedData:n})).data}async send({txs:n,params:u}){if(!n||!n.length)throw new Error("No transactions were passed");const t={txs:n,params:u};return(await this.communicator.send(E.sendTransactions,t)).data}}const _={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},y={defaultBlockParam:(r="latest")=>r,returnFullTxObjectParam:(r=!1)=>r,blockNumberToHex:r=>Number.isInteger(r)?`0x${r.toString(16)}`:r};class P{constructor(n){this.communicator=n,this.call=this.buildRequest({call:_.eth_call,formatters:[null,y.defaultBlockParam]}),this.getBalance=this.buildRequest({call:_.eth_getBalance,formatters:[null,y.defaultBlockParam]}),this.getCode=this.buildRequest({call:_.eth_getCode,formatters:[null,y.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:_.eth_getStorageAt,formatters:[null,y.blockNumberToHex,y.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:_.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:_.eth_getBlockByHash,formatters:[null,y.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:_.eth_getBlockByNumber,formatters:[y.blockNumberToHex,y.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:_.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:_.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:_.eth_getTransactionCount,formatters:[null,y.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:_.eth_gasPrice}),this.getEstimateGas=u=>this.buildRequest({call:_.eth_estimateGas})([u]),this.setSafeSettings=this.buildRequest({call:_.safe_setSettings})}buildRequest(n){const{call:u,formatters:t}=n;return async a=>{t&&Array.isArray(a)&&t.forEach((T,N)=>{T&&(a[N]=T(a[N]))});const i={call:u,params:a||[]};return(await this.communicator.send(E.rpcCall,i)).data}}}var D=f(96672),C=f(81539),v=f(36118);const p="0x1626ba7e",H="0x20c13b0b",R=4001;class b extends Error{constructor(n,u,t){super(n),this.code=u,this.data=t,Object.setPrototypeOf(this,b.prototype)}}class M{constructor(n){this.communicator=n}async getPermissions(){return(await this.communicator.send(E.wallet_getPermissions,void 0)).data}async requestPermissions(n){if(!this.isPermissionRequestValid(n))throw new b("Permissions request is invalid",R);try{return(await this.communicator.send(E.wallet_requestPermissions,n)).data}catch{throw new b("Permissions rejected",R)}}isPermissionRequestValid(n){return n.every(u=>typeof u=="object"?Object.keys(u).every(t=>!!Object.values(S).includes(t)):!1)}}const L=(r,n)=>n.some(u=>u.parentCapability===r);var U=()=>(r,n,u)=>{const t=u.value;return u.value=async function(){const a=new M(this.communicator);let i=await a.getPermissions();if(L(n,i)||(i=await a.requestPermissions([{[n]:{}}])),!L(n,i))throw new b("Permissions rejected",R);return t.apply(this)},u},G=function(r,n,u,t){var a=arguments.length,i=a<3?n:t===null?t=Object.getOwnPropertyDescriptor(n,u):t,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,n,u,t);else for(var T=r.length-1;T>=0;T--)(g=r[T])&&(i=(a<3?g(i):a>3?g(n,u,i):g(n,u))||i);return a>3&&i&&Object.defineProperty(n,u,i),i};class B{constructor(n){this.communicator=n}async getChainInfo(){return(await this.communicator.send(E.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(E.getSafeInfo,void 0)).data}async experimental_getBalances({currency:n="usd"}={}){return(await this.communicator.send(E.getSafeBalances,{currency:n})).data}async check1271Signature(n,u="0x"){const t=await this.getInfo(),a=(0,D.R)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,u]}),i={call:_.eth_call,params:[{to:t.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(E.rpcCall,i)).data.slice(0,10).toLowerCase()===p}catch{return!1}}async check1271SignatureBytes(n,u="0x"){const t=await this.getInfo(),a=(0,D.R)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,u]}),i={call:_.eth_call,params:[{to:t.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(E.rpcCall,i)).data.slice(0,10).toLowerCase()===H}catch{return!1}}calculateMessageHash(n){return(0,C.r)(n)}calculateTypedMessageHash(n){const u=typeof n.domain.chainId=="object"?n.domain.chainId.toNumber():Number(n.domain.chainId);let t=n.primaryType;if(!t){const a=Object.values(n.types),i=Object.keys(n.types).filter(g=>a.every(T=>T.every(({type:N})=>N.replace("[","").replace("]","")!==g)));if(i.length===0||i.length>1)throw new Error("Please specify primaryType");t=i[0]}return(0,v.Jv)({message:n.message,domain:{...n.domain,chainId:u,verifyingContract:n.domain.verifyingContract,salt:n.domain.salt},types:n.types,primaryType:t})}async getOffChainSignature(n){return(await this.communicator.send(E.getOffChainSignature,n)).data}async isMessageSigned(n,u="0x"){let t;if(typeof n=="string"&&(t=async()=>{const a=this.calculateMessageHash(n);return await this.isMessageHashSigned(a,u)}),s(n)&&(t=async()=>{const a=this.calculateTypedMessageHash(n);return await this.isMessageHashSigned(a,u)}),t)return await t();throw new Error("Invalid message type")}async isMessageHashSigned(n,u="0x"){const t=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of t)if(await a(n,u))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(E.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(E.requestAddressBook,void 0)).data}}G([U()],B.prototype,"requestAddressBook",null);class k{constructor(n={}){const{allowedDomains:u=null,debug:t=!1}=n;this.communicator=new l(u,t),this.eth=new P(this.communicator),this.txs=new w(this.communicator),this.safe=new B(this.communicator),this.wallet=new M(this.communicator)}}var j=k,F=j}}]);
